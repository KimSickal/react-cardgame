(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t){},22:function(e,t,n){e.exports=n(36)},27:function(e,t,n){},33:function(e,t,n){"use strict";n(19)},34:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n.n(o),c=n(20),i=n.n(c),s=(n(27),n(6)),u=n(7),l=n(9),E=n(8),p=n(10),d=n(1),O=n(4),f=n(2),L=function(e){return e.snake},_=Object(f.a)([L],function(e){return e.head}),b=(Object(f.a)([L],function(e){return e.head.posX}),Object(f.a)([L],function(e){return e.head.posY}),Object(f.a)([L],function(e){return e.tails})),m=Object(f.a)([L],function(e){return e.isGameOver}),h=Object(f.a)([L],function(e){return e.score}),A=function(e){return e.grid},v=Object(f.a)([A],function(e){return e.grid}),j=Object(f.a)([A],function(e){return e.item}),y=Object(f.a)([A],function(e){return e.block});!function(e){e.MOVE_HEAD="MOVE_HEAD",e.POP_TAILS="POP_TAILS",e.PUSH_TAILS="PUSH_TAILS",e.TOGGLE_GAME_OVER="TOGGLE_GAME_OVER",e.INCREMENT_SCORE="INCREMENT_SCORE"}(r||(r={}));var N;n(33);!function(e){e.SET_CELL="SET_CELL",e.INIT_GRID="INIT_GRID",e.RANDOM_PUT_ITEM="RANDOM_PUT_ITEM"}(N||(N={}));var C,S=[10,10];function T(e){return{type:r.PUSH_TAILS,targetPos:e}}function I(e){return{type:r.MOVE_HEAD,targetPos:e}}function M(){return{type:r.TOGGLE_GAME_OVER}}function g(e,t,n){return function(o){o(w(t,C.CELL_SNAKE_HEAD)),o(I(t)),void 0===n?o(w(e,C.CELL_BLANK)):(o(w(e,C.CELL_SNAKE_BODY)),o(w(n,C.CELL_BLANK)),o(T(e)),o({type:r.POP_TAILS}))}}function K(e,t){return function(n){n(w(e,C.CELL_SNAKE_BODY)),n(w(t,C.CELL_SNAKE_HEAD)),n(I(t)),n(T(e)),n(D()),n({type:r.INCREMENT_SCORE})}}function k(e){return function(t,n){var r=n(),o=_(r),a=function(){switch(e){case 37:return{posX:o.posX-1,posY:o.posY};case 38:return{posX:o.posX,posY:o.posY-1};case 39:return{posX:o.posX+1,posY:o.posY};case 40:return{posX:o.posX,posY:o.posY+1};default:return}}();if(void 0!==a&&null!==a)if(function(e,t,n){return!(t.posY<0||t.posY>=S[0])&&!(t.posX<0||t.posX>=S[1])&&e>=37&&e<=40}(e,a)){var c=v(r)[a.posY][a.posX];if(c===C.CELL_BLANK){var i=b(r)[0];t(g(o,a,i))}else c===C.CELL_SNAKE_ITEM?t(K(o,a)):t(M())}else t(M())}}function w(e,t){return{type:N.SET_CELL,position:e,cellType:t}}function D(){return{type:N.RANDOM_PUT_ITEM}}function Y(e){return{type:N.INIT_GRID,head:e}}!function(e){e[e.CELL_BLANK=0]="CELL_BLANK",e[e.CELL_SNAKE_HEAD=1]="CELL_SNAKE_HEAD",e[e.CELL_SNAKE_BODY=2]="CELL_SNAKE_BODY",e[e.CELL_SNAKE_ITEM=3]="CELL_SNAKE_ITEM",e[e.CELL_SNAKE_BLOCK=4]="CELL_SNAKE_BLOCK"}(C||(C={}));var G=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.head;this.props.initializeGrid(e),this.props.randomPutItem()}},{key:"render",value:function(){var e=this.props,t=e.head,n=e.tails,r=e.item,a=e.block,c=e.isGameOver,i=e.score;return o.createElement("div",{style:{width:"".concat(20*S[1],"px"),height:"".concat(20*S[0],"px"),border:"2px solid grey"}},c?o.createElement(o.Fragment,null,o.createElement("p",null,"Game"),o.createElement("p",null,"Set"),o.createElement("p",null,"Score: ".concat(i))):o.createElement(o.Fragment,null,o.createElement(B,null),o.createElement("div",{style:{position:"absolute",width:"".concat(20,"px"),height:"".concat(20,"px"),background:"black",top:20*t.posY,left:20*t.posX}}),n.map(function(e,t){return o.createElement("div",{style:{position:"absolute",width:"".concat(20,"px"),height:"".concat(20,"px"),background:"grey",top:20*e.posY,left:20*e.posX},key:t})}),o.createElement("div",{style:{position:"absolute",width:"".concat(20,"px"),height:"".concat(20,"px"),background:"green",top:20*r.posY,left:20*r.posX}}),o.createElement("div",{style:{position:"absolute",width:"".concat(20,"px"),height:"".concat(20,"px"),background:"red",top:20*a.posY,left:20*a.posX,color:"white",fontWeight:"bold"}},"X")))}}]),t}(o.Component);var X=Object(O.b)(function(e){return{head:_(e),tails:b(e),item:j(e),block:y(e),isGameOver:m(e),score:h(e)}},function(e){return Object(d.b)({initializeGrid:Y,randomPutItem:D},e)})(G),P=n(12),R=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(E.a)(t).call(this,e))).onKeyDown=n.onKeyDown.bind(Object(P.a)(Object(P.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onKeyDown",value:function(e){this.props.keydownMoveHeadIfNeeded(e.keyCode)}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){return o.createElement("div",null)}}]),t}(o.Component);var B=Object(O.b)(function(e){return{}},function(e){return Object(d.b)({keydownMoveHeadIfNeeded:k,initializeGrid:Y},e)})(R),H=n(13),x=n(3),U={head:{posX:0,posY:0},tails:[],isGameOver:!1,score:0};var V={grid:[],item:{posX:0,posY:0},block:{posX:0,posY:0}};var z=Object(d.c)({snake:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=e.tails,o=e.score;switch(t.type){case r.MOVE_HEAD:return Object(x.a)({},e,{head:t.targetPos});case r.POP_TAILS:return Object(x.a)({},e,{tails:n.slice(1)});case r.PUSH_TAILS:return Object(x.a)({},e,{tails:n.concat(t.targetPos)});case r.TOGGLE_GAME_OVER:return Object(x.a)({},e,{isGameOver:!0});case r.INCREMENT_SCORE:return Object(x.a)({},e,{score:o+1});default:return e}},grid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.SET_CELL:var n=e.grid;return n[t.position.posY][t.position.posX]=t.cellType,Object(x.a)({},e,{grid:n});case N.INIT_GRID:var r=Array.from(Array(S[0])).map(function(e,n){return Array.from(Array(S[1])).map(function(e,r){return n===t.head.posY&&r===t.head.posX?C.CELL_SNAKE_HEAD:C.CELL_BLANK})});return Object(x.a)({},e,{grid:r});case N.RANDOM_PUT_ITEM:for(var o=e.grid,a=0,c=0,i=0,s=0;;)if(c=Math.floor(Math.random()*S[0]),a=Math.floor(Math.random()*S[1]),o[c][a]===C.CELL_BLANK){o[c][a]=C.CELL_SNAKE_ITEM;break}for(;;)if(s=Math.floor(Math.random()*S[0]),i=Math.floor(Math.random()*S[1]),o[s][i]===C.CELL_BLANK){o[s][i]=C.CELL_SNAKE_BLOCK;break}return Object(x.a)({},e,{grid:o,item:{posX:a,posY:c},block:{posX:i,posY:s}});default:return e}}}),F=(n(34),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("div",null,o.createElement(O.a,{store:Object(d.d)(z,Object(d.a)(H.a))},o.createElement("div",{className:"App"},o.createElement(X,null))),o.createElement(O.a,{store:Object(d.d)(z,Object(d.a)(H.a))},o.createElement("div",{className:"App"},o.createElement(X,null)))),o.createElement("div",null,o.createElement(O.a,{store:Object(d.d)(z,Object(d.a)(H.a))},o.createElement("div",{className:"App"},o.createElement(X,null))),o.createElement(O.a,{store:Object(d.d)(z,Object(d.a)(H.a))},o.createElement("div",{className:"App"},o.createElement(X,null)))))}}]),t}(o.Component));i.a.render(a.a.createElement(F,null),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.f436ac54.chunk.js.map